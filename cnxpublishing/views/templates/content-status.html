{% extends "base.html" %}
{% block content %}
  <h1>Content Status</h1>

  <form action="/a/content-status/" method="get">
    <b>Filters:</b><br>
    Status: <br>
      <label><input type="checkbox" name="status_filter[]" {{PENDING}} value="PENDING">
        PENDING
        (<i class="fa fa-exclamation-triangle" style="font-size:20px;color:gold"></i>)
      </label>&emsp;&emsp;&emsp;
      <label><input type="checkbox" name="status_filter[]" {{STARTED}} value="STARTED">
        STARTED
        (<i class="fa fa-exclamation-triangle" style="font-size:20px;color:gold"></i>)
      </label>&emsp;&emsp;&emsp;
      <label><input type="checkbox" name="status_filter[]" {{RETRY}} value="RETRY">
        RETRY
        (<i class="fa fa-close" style="font-size:20px;color:red"></i>)
      </label>&emsp;&emsp;&emsp;
      <label><input type="checkbox" name="status_filter[]" {{FAILURE}} value="FAILURE">
        FAILURE
        (<i class="fa fa-close" style="font-size:20px;color:red"></i>)
      </label>&emsp;&emsp;&emsp;
      <label><input type="checkbox" name="status_filter[]" {{SUCCESS}} value="SUCCESS">
        SUCCESS
        (<i class="fa fa-check-square" style="font-size:20px;color:limeGreen"></i>)
      </label>
    <br><br>Author:
      <input type="text" name="author" value={{author}}><br>
    ident_hash:
      <input type="text" name="ident_hash" value={{ident_hash}}><br>
    Entries Per Page:  <input type="number" min="1" name="number" value={{num_entries}}><br>
    Page:  <input type="number" min="1" name="page" value={{page}}><br>
    Sort Order?
    <select name="sort">
      <option value="bpsa.created DESC" {{newSort}}>newest first</option>
      <option value="bpsa.created ASC" {{oldSort}}>oldest first</option>
      <option value="STATE" {{stateSort}}>state</option>
      <option value="m.name" {{nameSort}}>title</option>
    </select>
    <br><br>
    <input type="submit" value="Filter"><br>
  </form>

  <br><br><br>

  <table>
    <tr>
      <th>Created</th>
      <th>Ident_hash</th>
      <th>Title</th>
      <th>Authors</th>
      <th>State</th>
      <th>Message</th>
    </tr>
    {% for state in states %}
      <tr>
        <td>{{ state.created.strftime('%Y-%m-%d %H:%M:%S') }}</td>
        <td>{{ state.ident_hash }}</td>
        <td>{{ state.title }}</td>
        <td>{{ state.authors }}</td>
        <td>
          <i class="{{state.state_icon}}" style="{{state.state_icon_style}}"></i>
          <a href="/a/content-status/{{ state.ident_hash }}">{{ state.state }}</a>
        </td>
        <td>{{ state.state_message }}</td>
      </tr>
    {% endfor %}
  </table>
{% endblock %}
